<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>What's New in Java 16</title><link rel=stylesheet href=/css/style.css></head><body><header>=======================<br>== <a href=https://jacobhell.github.io/>Jacob Hell's Blog</a> ==<br>=======================<div style=float:right></div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/posts/><b>Posts</b></a>.
<a href=/categories/><b>Categories</b></a>.
<a href=/tags/><b>Tags</b></a>.
<a href=/index.xml><b>Feed</b></a>.</nav></p></header><main><article><h1>What's New in Java 16</h1><b><time>08.03.2021 00:00</time></b>
<a href=/tags/java>java</a><div><h2 id=vector-api-incubator>Vector API (Incubator)</h2><p>The Vector API has been added to the <a href=https://openjdk.java.net/jeps/11>incubator module</a>.</p><p>The Vector API adds vector computations that reliably compile at runtime to optimal vector hardware instructions.</p><p>Here is an example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> VectorSpecies<span style=color:#f92672>&lt;</span>Float<span style=color:#f92672>&gt;</span> SPECIES <span style=color:#f92672>=</span> FloatVector<span style=color:#f92672>.</span><span style=color:#a6e22e>SPECIES_256</span><span style=color:#f92672>;</span>

<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>vectorComputation</span><span style=color:#f92672>(</span><span style=color:#66d9ef>float</span><span style=color:#f92672>[]</span> a<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span><span style=color:#f92672>[]</span> b<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span><span style=color:#f92672>[]</span> c<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>int</span> upperBound <span style=color:#f92672>=</span> SPECIES<span style=color:#f92672>.</span><span style=color:#a6e22e>loopBound</span><span style=color:#f92672>(</span>a<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(;</span> i <span style=color:#f92672>&lt;</span> upperBound<span style=color:#f92672>;</span> i <span style=color:#f92672>+=</span> SPECIES<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// FloatVector va, vb, vc;
</span><span style=color:#75715e></span>        var va <span style=color:#f92672>=</span> FloatVector<span style=color:#f92672>.</span><span style=color:#a6e22e>fromArray</span><span style=color:#f92672>(</span>SPECIES<span style=color:#f92672>,</span> a<span style=color:#f92672>,</span> i<span style=color:#f92672>);</span>
        var vb <span style=color:#f92672>=</span> FloatVector<span style=color:#f92672>.</span><span style=color:#a6e22e>fromArray</span><span style=color:#f92672>(</span>SPECIES<span style=color:#f92672>,</span> b<span style=color:#f92672>,</span> i<span style=color:#f92672>);</span>
        var vc <span style=color:#f92672>=</span> va<span style=color:#f92672>.</span><span style=color:#a6e22e>mul</span><span style=color:#f92672>(</span>va<span style=color:#f92672>).</span>
                    add<span style=color:#f92672>(</span>vb<span style=color:#f92672>.</span><span style=color:#a6e22e>mul</span><span style=color:#f92672>(</span>vb<span style=color:#f92672>)).</span>
                    neg<span style=color:#f92672>();</span>
        vc<span style=color:#f92672>.</span><span style=color:#a6e22e>intoArray</span><span style=color:#f92672>(</span>c<span style=color:#f92672>,</span> i<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(;</span> i <span style=color:#f92672>&lt;</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
        c<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>a<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>*</span> a<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>*</span> b<span style=color:#f92672>[</span>i<span style=color:#f92672>])</span> <span style=color:#f92672>*</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>.</span><span style=color:#a6e22e>0f</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Based on my research, this won&rsquo;t be useful for most developers right away. It fits a niche used for low level processing and matrix multiplication.</p><h2 id=enable-c14-language-features>Enable C++14 Language Features</h2><p>Allows the use of C++14 language features in JDK C++ source code. This won&rsquo;t be relevant to someone using Java to write code. But we might see performance improvements.</p><h2 id=migrate-from-mercurial-to-git-and-migrate-to-github>Migrate from Mercurial to Git and Migrate to GitHub</h2><p>Move the JDK repository to GitHub. I think this is a good change. Git is definitely the most widely used source control software. And GitHub is the easiest to use git hosting software.</p><h2 id=zgc-concurrent-thread-stack-processing>ZGC: Concurrent Thread-Stack Processing</h2><p>Move ZGC thread-stack processing from safepoints to a concurrent phase. This improves scalability and performance of the garbage collector. Not something a developer would notice immediately.</p><h2 id=unix-domain-socket-channels>Unix-Domain Socket Channels</h2><p>Add Unix-domain (<code>AF_UNIX</code>) socket support to the <a href=https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/nio/channels/SocketChannel.html>socket channel</a> and <a href=https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/nio/channels/ServerSocketChannel.html>server-socket channel</a> APIs. A <a href=https://en.wikipedia.org/wiki/Unix_domain_socket>Unix domain socket</a> is a data <a href=https://en.wikipedia.org/wiki/Communication_endpoint>communications endpoint</a> for exchanging data between processes executing on the same host operating system.</p><p>Databases like Postgres and MySQL have Unix domain socket communication options. I&rsquo;ve never used them, but I&rsquo;m sure it will be useful for developers who regularly work with them.</p><h2 id=alpine-linux-port>Alpine Linux Port</h2><p>Port the JDK to Alpine Linux, and to other Linux distributions that use musl as their primary C library.</p><p>This will be helpful for getting services like Tomcat, Jetty, and Spring to work on Alpine linux based Docker images.</p><h2 id=elastic-metaspace>Elastic Metaspace</h2><p>Return unused HotSpot class-metadata (i.e., <em>metaspace</em>) memory to the operating system more promptly. Not something a developer would notice immediately.</p><h2 id=windowsaarch64-port>Windows/AArch64 Port</h2><p>Port the JDK to Windows/AArch64.</p><h2 id=foreign-linker-api-incubator>Foreign Linker API (Incubator)</h2><p>Introduce an API that offers statically-typed, pure-Java access to native code.</p><p>Native code is code written in other languages like C, C++, and assembly. The Java Native Interface (JNI) is the framework that allows this currently. The Foreign Linker API and Project Panama seek to offer an alternative to the cumbersome JNI options.</p><h2 id=warnings-for-value-based-classes>Warnings for Value-Based Classes</h2><p>Designate the primitive wrapper classes as <em>value-based</em> and deprecate their constructors for removal.</p><p>A value based class has the following properties:</p><ul><li>are final and immutable (though may contain references to mutable objects);</li><li>have implementations of <code>equals</code>, <code>hashCode</code>, and <code>toString</code> which are computed solely from the instance&rsquo;s state and not from its identity or the state of any other object or variable;</li><li>make no use of identity-sensitive operations such as reference equality (<code>==</code>) between instances, identity hash code of instances, or synchronization on an instances&rsquo;s intrinsic lock;</li><li>are considered equal solely based on <code>equals()</code>, not based on reference equality (<code>==</code>);</li><li>do not have accessible constructors, but are instead instantiated through factory methods which make no committment as to the identity of returned instances;</li><li>are <em>freely substitutable</em> when equal, meaning that interchanging any two instances <code>x</code> and <code>y</code> that are equal according to <code>equals()</code> in any computation or method invocation should produce no visible change in behavior.</li></ul><p>Two examples of Value based classes are Optional and LocalDateTime.</p><p>This update isn&rsquo;t very exciting, but it shows progress toward increasing adoption of Value Based classes.</p><h2 id=packaging-tool>Packaging Tool</h2><p>Provide the <code>jpackage</code> tool, for packaging self-contained Java applications. <code>jpackage</code> makes it easy to install and uninstall java applications. You can create installers for the desired machine (exe, dmg, and deb for example).</p><p>For destination machines, you don&rsquo;t even have to install the JRE.</p><h2 id=foreign-memory-access-api-third-incubator>Foreign-Memory Access API (Third Incubator)</h2><p>Introduce an API to allow Java programs to safely and efficiently access foreign memory outside of the Java heap. This looks helpful for JVM developers.</p><h2 id=pattern-matching-for-instanceof>Pattern Matching for instanceof</h2><p>Enhance the Java programming language with <em>pattern matching</em> for the <code>instanceof</code> operator.</p><p>This change is very useful when using <code>instanceof</code>.</p><p>For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>obj <span style=color:#66d9ef>instanceof</span> String s <span style=color:#f92672>&amp;&amp;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;foo&#34;</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
    <span style=color:#75715e>// s contains foo!
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</code></pre></div><h2 id=records>Records</h2><p>Enhance the Java programming language with <a href=https://cr.openjdk.java.net/~briangoetz/amber/datum.html>records</a>.</p><p>I&rsquo;m excited for this update. Records make Java less verbose. Something that Project Lombok tries to solve as well.</p><p>For example, you can type:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>record <span style=color:#a6e22e>Point</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> x<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> y<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>}</span>
</code></pre></div><p>Which would create a class called <code>Point</code> with a constructor with <code>int x, int y</code>. You would also have accessor methods generated. Records are <code>final</code> so you can&rsquo;t edit them once created.</p><h2 id=strongly-encapsulate-jdk-internals-by-default>Strongly Encapsulate JDK Internals by Default</h2><p>Strongly encapsulate all internal elements of the JDK by default. This update is to improve security and maintainability of the JDK.</p><h2 id=sealed-classes-second-preview>Sealed Classes (Second Preview)</h2><p>A <code>sealed</code> class only allows extension or implementation by other classes that it allows.</p><p>For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> sealed <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Shape</span>
    permits Circle<span style=color:#f92672>,</span> Rectangle<span style=color:#f92672>,</span> Square
</code></pre></div><p>Can only be extended by the classes Circle, Rectangle, and Square.</p><p>I&rsquo;m not sure what I would use this for, but it&rsquo;s good to know it exists.</p></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/post/5-16-21/>5-16-2021</a></li><li><a href=/post/java-16/>What's New in Java 16</a></li><li><a href=/post/gaming-pc-under-250/>How to Build a Gaming PC Under $250</a></li><li><a href=/post/reliability-scalability-maintainability/>What Are Reliability, Scalability, and Maintainability in Distributed Systems?</a></li><li><a href=/post/pipeline-nlp/>Implementing Pipeline from the SciKit Learn Module</a></li></ul></div></div></aside><footer><p>&copy; 2021 <a href=https://jacobhell.github.io/><b>Jacob Hell's Blog</b></a>.
<a href=https://github.com/jacobhell><b>Github</b></a>.
<a href=https://linkedin.com/in/jacobhell><b>LinkedIn</b></a>.</p></footer></body></html>